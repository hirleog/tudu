<section>
  <div
    *ngIf="
      showDiv &&
      ((prestadorIsLogged && isProfessional === true && !isEndFlow) ||
        (clienteIsLogged === true && isProfessional === false && !isEndFlow))
    "
  >
    <!-- Menu Mobile Flutuante -->
    <div
      class="menu-flutuante md:hidden"
      [class.menu-visible]="isMenuVisible"
      [class.menu-hidden]="!isMenuVisible"
    >
      <div class="flex justify-around items-center">
        <!-- Serviços -->
        <div
          class="menu-item flex flex-col items-center p-1"
          [class.active]="
            router.url ===
            (isProfessional || isProfileRoute ? '/tudu-professional/home' : '/')
          "
          (click)="
            switchRoute(
              isProfessional || isProfileRoute ? '/tudu-professional/home' : '/'
            )
          "
        >
          <i class="fas fa-search text-lg"></i>
          <p class="text-xs mt-1">Serviços</p>
        </div>

        <!-- Pedidos -->
        <div
          *ngIf="isProfessional === false && isProfileRoute === false"
          class="menu-item flex flex-col items-center p-1"
          [class.active]="router.url === '/home'"
          (click)="switchRoute('/home')"
        >
          <i class="fas fa-tasks text-lg"></i>
          <p class="text-xs mt-1">Pedidos</p>
        </div>

        <!-- Pendentes -->
        <div
          class="menu-item flex flex-col items-center p-1"
          [class.active]="
            router.url ===
            (isProfessional || isProfileRoute
              ? '/tudu-professional/progress'
              : '/home/progress')
          "
          (click)="
            switchRoute(
              isProfessional || isProfileRoute
                ? '/tudu-professional/progress'
                : '/home/progress'
            )
          "
        >
          <i class="fas fa-clock text-lg"></i>
          <p class="text-xs mt-1">
            {{ isProfessional ? "Pendentes" : "Andamento" }}
          </p>
        </div>

        <!-- Histórico -->
        <div
          *ngIf="isProfessional"
          class="menu-item flex flex-col items-center p-1"
          [class.active]="router.url === '/tudu-professional/historic'"
          (click)="switchRoute('/tudu-professional/historic')"
        >
          <i class="fas fa-scroll text-lg"></i>
          <p class="text-xs mt-1">Histórico</p>
        </div>

        <!-- Perfil -->
        <div
          class="menu-item flex flex-col items-center p-1"
          [class.active]="profileActiveColor || isProfileRoute"
          (click)="goToProfile()"
        >
          <i class="fas fa-user text-lg"></i>
          <p class="text-xs mt-1">Perfil</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Menu Desktop (aparece apenas em telas médias/grandes) -->
<div
  *ngIf="showDiv"
  class="flex-shrink-0 top-16 overflow-y-auto transition-all duration-300 ease-in-out shadow-md hr-nav-top"
  [class.w-64]="isMenuExpanded || isHovered"
  [class.w-20]="!isMenuExpanded && !isHovered"
  (mouseenter)="isHovered = true"
  (mouseleave)="isHovered = false"
>
  <div
    class="flex-col w-full py-14 h-full hidden md:block"
    style="height: 10000vw"
  >
    <!-- Conteúdo do menu desktop (mesmo do seu código original) -->
    <div class="flex flex-col h-full justify-between fixed">
      <div>
        <!-- Serviços -->
        <div
          class="flex items-center px-4 py-3 menu-item-desktop"
          [class.active]="
            router.url ===
            (isProfessional || isProfileRoute ? '/tudu-professional/home' : '/')
          "
          (click)="
            switchRoute(
              isProfessional || isProfileRoute ? '/tudu-professional/home' : '/'
            )
          "
        >
          <i class="fas fa-search text-lg mr-4"></i>
          <span class="whitespace-nowrap" *ngIf="isMenuExpanded || isHovered"
            >Serviços</span
          >
        </div>

        <!-- Pedidos -->
        <div
          *ngIf="isProfessional === false && isProfileRoute === false"
          class="flex items-center px-4 py-3 menu-item-desktop"
          [class.active]="router.url === '/home'"
          (click)="switchRoute('/home')"
        >
          <i class="fas fa-tasks text-lg mr-4"></i>
          <span class="whitespace-nowrap" *ngIf="isMenuExpanded || isHovered"
            >Pedidos</span
          >
        </div>

        <!-- Pendentes -->
        <div
          class="flex items-center px-4 py-3 menu-item-desktop"
          [class.active]="
            router.url ===
            (isProfessional || isProfileRoute
              ? '/tudu-professional/progress'
              : '/home/progress')
          "
          (click)="
            switchRoute(
              isProfessional || isProfileRoute
                ? '/tudu-professional/progress'
                : '/home/progress'
            )
          "
        >
          <i class="fas fa-clock text-lg mr-4"></i>
          <span class="whitespace-nowrap" *ngIf="isMenuExpanded || isHovered"
            >Pendentes</span
          >
        </div>

        <div
          *ngIf="isProfessional"
          class="flex items-center px-4 py-3 menu-item-desktop"
          [class.active]="router.url === '/tudu-professional/historic'"
          (click)="switchRoute('/tudu-professional/historic')"
        >
          <i class="fas fa-tasks text-lg mr-4"></i>
          <span class="whitespace-nowrap" *ngIf="isMenuExpanded || isHovered"
            >Histórico</span
          >
        </div>

        <!-- <div
          *ngIf="isProfessional"
          class="menu-item flex flex-col items-center p-2"
          [class.active]="router.url === '/tudu-professional/historic'"
          (click)="switchRoute('/tudu-professional/historic')"
        >
          <i class="fas fa-scroll text-lg"></i>
          <p class="text-xs mt-1">Histórico</p>
        </div> -->

        <!-- Perfil -->
        <div
          class="flex items-center px-4 py-3 menu-item-desktop"
          [class.active]="profileActiveColor || isProfileRoute"
          (click)="goToProfile()"
        >
          <i class="fas fa-user text-lg mr-4"></i>
          <span class="whitespace-nowrap" *ngIf="isMenuExpanded || isHovered"
            >Perfil</span
          >
        </div>
        <!-- Botão de expandir/recolher -->
        <div class="px-4 mb-4 mt-10">
          <button
            class="flex items-center text-gray-600 hover:text-primary focus:outline-none w-full"
            (click)="toggleMenu()"
          >
            <i
              class="fas text-lg"
              [class.fa-chevron-left]="isMenuExpanded"
              [class.fa-chevron-right]="!isMenuExpanded"
            ></i>
            <span
              class="ml-3 whitespace-nowrap"
              style="color: var(--secondary)"
              *ngIf="isMenuExpanded || isHovered"
              >{{ isMenuExpanded ? "Recolher menu" : "Expandir menu" }}</span
            >
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
